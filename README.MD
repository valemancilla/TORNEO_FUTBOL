# main.py

### 1. **Importaciones y configuraciÃ³n de la ruta**

```python
import sys
import os
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))
```

- **FunciÃ³n:**
   Ajusta la ruta del sistema para que Python pueda encontrar y cargar los mÃ³dulos que estÃ¡n en el directorio padre.
- **Â¿QuÃ© hace?:**
   AÃ±ade la carpeta padre del archivo actual al path de bÃºsqueda de mÃ³dulos de Python, para que se puedan importar los mÃ³dulos que estÃ¡n en un nivel superior (en este caso, los mÃ³dulos dentro de la carpeta `controllers`).
- **Â¿QuÃ© guarda?:**
   No guarda datos, solo modifica la configuraciÃ³n de bÃºsqueda de mÃ³dulos en tiempo de ejecuciÃ³n.
- **AplicaciÃ³n:**
   Esto es Ãºtil en proyectos organizados por carpetas, para poder importar mÃ³dulos que estÃ¡n en otra carpeta sin necesidad de instalar paquetes o modificar variables externas.

------

### 2. **ImportaciÃ³n de mÃ³dulos**

```python
import controllers.equipos as equipos
import controllers.jugadores as jugadores
import controllers.transferencias as transferencias
import controllers.estadisticas as estadisticas
```

- **FunciÃ³n:**
   Importar funcionalidades especÃ­ficas para manejar equipos, jugadores, transferencias y estadÃ­sticas.
- **Â¿QuÃ© hace?:**
   Importa las funciones y clases definidas en los archivos `equipos.py`, `jugadores.py`, `transferencias.py` y `estadisticas.py` que estÃ¡n dentro de la carpeta `controllers`.
- **Â¿QuÃ© guarda?:**
   Guarda referencias a los mÃ³dulos importados bajo nombres cortos para que puedas llamar a sus funciones (por ejemplo, `equipos.registrar_equipo()`).
- **AplicaciÃ³n:**
   Permite dividir la aplicaciÃ³n en partes separadas y organizadas, donde cada mÃ³dulo tiene responsabilidades especÃ­ficas.

------

### 3. **FunciÃ³n principal: `menu()`**

```python
def menu():
    while True:
        print("\n=== GESTOR DE TORNEOS INTERNACIONALES ===")
        print("1. Registrar equipo")
        print("2. Listar equipos")
        print("3. Registrar jugador")
        print("4. Listar jugadores")
        print("5. Transferencia de jugador (venta o prÃ©stamo)")
        print("6. Ver estadÃ­sticas")
        print("0. Salir")

        opcion = input("Seleccione una opciÃ³n: ").strip()

        if opcion == "1":
            equipos.registrar_equipo()
        elif opcion == "2":
            equipos.listar_equipos()
        elif opcion == "3":
            jugadores.registrar_jugador()
        elif opcion == "4":
            jugadores.listar_jugadores()
        elif opcion == "5":
            transferencias.realizar_transferencia()
            transferencias.listar_transferencias()
        elif opcion == "6":
            estadisticas.ver_estadisticas()
        elif opcion == "0":
            print("Â¡Hasta luego!")
            break
        else:
            print("OpciÃ³n invÃ¡lida. Intenta de nuevo.")
```

- **FunciÃ³n:**
   Controla el flujo principal del programa mostrando un menÃº de opciones y ejecutando las acciones que el usuario seleccione.
- **Â¿QuÃ© hace?:**
  - Muestra opciones en la consola.
  - Recibe la opciÃ³n que el usuario escribe.
  - Ejecuta la funciÃ³n correspondiente del mÃ³dulo adecuado.
  - Se repite hasta que el usuario elige salir (`opciÃ³n 0`).
- **Â¿QuÃ© guarda?:**
   No guarda datos por sÃ­ sola, solo gestiona las llamadas a otras funciones que sÃ­ trabajan con datos.
- **AplicaciÃ³n:**
   Proporciona una interfaz sencilla para que un usuario pueda interactuar con el sistema desde la terminal.

------

### 4. **Bloque para ejecutar el menÃº si el script es ejecutado directamente**

```python
if __name__ == "__main__":
    menu()
```

- **FunciÃ³n:**
   Este bloque garantiza que la funciÃ³n `menu()` solo se ejecute si el archivo es el programa principal que se estÃ¡ ejecutando, y no cuando el archivo se importa como mÃ³dulo.
- **Â¿QuÃ© hace?:**
   Llama a la funciÃ³n `menu()` para iniciar la aplicaciÃ³n.
- **Â¿QuÃ© guarda?:**
   No guarda datos.
- **AplicaciÃ³n:**
   Es una prÃ¡ctica estÃ¡ndar para scripts Python que pueden usarse como programa principal o como mÃ³dulo importado.

------

# Resumen 

- Ajusta la ruta para importar mÃ³dulos.
- Importa cuatro mÃ³dulos responsables de distintas partes del sistema.
- Define la funciÃ³n `menu()` que muestra un menÃº en la terminal y gestiona la interacciÃ³n con el usuario.
- Ejecuta la funciÃ³n `menu()` cuando se corre el script directamente.

------

# controllers

### Archivo: `controllers/equipos.py`

------

### FunciÃ³n:

```
registrar_equipo()
```

### Â¿QuÃ© hace?:

- Muestra un mensaje para que el usuario ingrese los datos de un nuevo equipo.
- Solicita al usuario, mediante la funciÃ³n `input_obligatorio()`, que ingrese: nombre, fecha de fundaciÃ³n, paÃ­s y ID de liga del equipo.
- Lee el archivo JSON donde estÃ¡n guardados los equipos (`equipos.json`).
- Genera un nuevo ID basado en la cantidad actual de equipos.
- Crea un nuevo diccionario con los datos del equipo.
- Agrega el nuevo equipo al diccionario de equipos usando el nuevo ID como clave.
- Guarda el diccionario actualizado en el archivo JSON.
- Informa al usuario que el equipo fue registrado correctamente.

### Â¿QuÃ© guarda?:

Guarda el equipo registrado en el archivo `data/equipos.json`, actualizando el archivo con el nuevo equipo aÃ±adido.

### AplicaciÃ³n:

Se utiliza para registrar nuevos equipos dentro del sistema de gestiÃ³n de torneos, permitiendo mantener actualizada la base de datos de equipos.

------

### FunciÃ³n:

```
listar_equipos()
```

### Â¿QuÃ© hace?:

- Lee el archivo JSON con todos los equipos registrados.
- Si no hay equipos, muestra un mensaje indicando que no hay registros.
- Si hay equipos, muestra en formato tabular una lista con el ID, nombre, fecha de fundaciÃ³n, paÃ­s y liga de cada equipo.
- El formato estÃ¡ diseÃ±ado para que la informaciÃ³n quede ordenada y sea fÃ¡cil de leer en la consola.

### Â¿QuÃ© guarda?:

No guarda datos, solo lee y muestra la informaciÃ³n almacenada en `equipos.json`.

### AplicaciÃ³n:

Permite al usuario visualizar fÃ¡cilmente todos los equipos registrados en el sistema.

------

## estadisticas

------

### FunciÃ³n:

```
ver_estadisticas()
```

### Â¿QuÃ© hace?:

- Lee la informaciÃ³n almacenada en tres archivos JSON: equipos, jugadores y transferencias.
- Muestra en consola estadÃ­sticas generales del sistema:
  - NÃºmero total de equipos registrados.
  - NÃºmero de jugadores que tiene cada equipo, agrupando por el ID del equipo.
  - NÃºmero total de transferencias registradas.
- Presenta estos datos de forma clara para que el usuario pueda entender el estado actual de los registros.

### Â¿QuÃ© guarda?:

No guarda datos, solo lee los datos existentes y muestra resultados estadÃ­sticos.

### AplicaciÃ³n:

Permite visualizar estadÃ­sticas bÃ¡sicas sobre la base de datos del sistema de torneos, facilitando un resumen rÃ¡pido para tomar decisiones o revisar el estado del sistema.

------

AquÃ­ tienes la explicaciÃ³n para el mÃ³dulo `jugadores.py` con las dos funciones que compartiste, siguiendo el formato que pediste:

------

### Archivo: `controllers/jugadores.py`

------

### FunciÃ³n:

```
registrar_jugador()
```

### Â¿QuÃ© hace?:

- Muestra un mensaje para que el usuario ingrese los datos de un nuevo jugador.
- Solicita al usuario el nombre, posiciÃ³n, nÃºmero dorsal y el ID del equipo al que pertenece el jugador, usando la funciÃ³n `input_obligatorio()`.
- Lee la lista de equipos registrados para verificar que el ID del equipo exista.
- Si el equipo no existe, muestra un mensaje de error y no continÃºa con el registro.
- Si el equipo existe, lee el archivo JSON de jugadores y calcula un nuevo ID.
- Crea un diccionario con la informaciÃ³n del jugador.
- Agrega el nuevo jugador al diccionario de jugadores.
- Guarda la lista actualizada en el archivo JSON.
- Informa que el jugador fue registrado correctamente.

### Â¿QuÃ© guarda?:

Guarda los datos del nuevo jugador en el archivo `data/jugadores.json`.

### AplicaciÃ³n:

Permite registrar jugadores y asociarlos a un equipo dentro del sistema de gestiÃ³n de torneos.

------

### FunciÃ³n:

```
listar_jugadores()
```

### Â¿QuÃ© hace?:

- Lee los datos de jugadores y equipos desde sus archivos JSON respectivos.
- Si no hay jugadores registrados, muestra un mensaje informativo.
- Si hay jugadores, muestra una tabla con ID, nombre, posiciÃ³n, nÃºmero dorsal y nombre del equipo asociado.
- Para mostrar el nombre del equipo, busca en la lista de equipos usando el `equipo_id` del jugador. Si no encuentra el equipo, muestra "Desconocido".

### Â¿QuÃ© guarda?:

No guarda datos, solo lee y muestra la informaciÃ³n almacenada.

### AplicaciÃ³n:

Permite al usuario visualizar la lista completa de jugadores con detalles importantes y el equipo al que pertenecen.

------

Perfecto, aquÃ­ tienes la explicaciÃ³n del mÃ³dulo `transferencias.py` con las dos funciones que mostraste, siguiendo el formato que pediste:

------

### Archivo: `controllers/transferencias.py`

------

### FunciÃ³n:

```
realizar_transferencia()
```

### Â¿QuÃ© hace?:

- Solicita al usuario ingresar el ID del jugador, el ID del equipo destino, el tipo de transferencia (venta o prÃ©stamo) y la fecha.
- Lee los datos actuales de jugadores, equipos y transferencias desde sus archivos JSON.
- Verifica que el jugador y el equipo destino existan.
- Si el tipo es "venta", actualiza el equipo del jugador en el archivo de jugadores para reflejar el cambio de equipo.
- Crea un nuevo registro de transferencia con un ID incremental.
- Guarda la nueva transferencia en el archivo JSON correspondiente.
- Informa al usuario que la transferencia fue registrada correctamente.

### Â¿QuÃ© guarda?:

Guarda la transferencia en `data/transferencias.json`. En caso de venta, tambiÃ©n actualiza el equipo del jugador en `data/jugadores.json`.

### AplicaciÃ³n:

Permite gestionar las transferencias de jugadores entre equipos, registrando la operaciÃ³n y actualizando el estado del jugador en el sistema.

------

### FunciÃ³n:

```
listar_transferencias()
```

### Â¿QuÃ© hace?:

- Lee los datos de transferencias, jugadores y equipos desde sus archivos JSON.
- Si no hay transferencias registradas, muestra un mensaje informativo.
- Si hay transferencias, muestra una tabla con el historial completo: ID, nombre del jugador, equipo origen, equipo destino, tipo de transferencia y fecha.
- Utiliza los IDs para obtener los nombres de jugadores y equipos, mostrando "Desconocido" si no encuentra algÃºn dato.

### Â¿QuÃ© guarda?:

No guarda datos, solo muestra la informaciÃ³n leÃ­da de los archivos JSON.

### AplicaciÃ³n:

Permite al usuario consultar el historial de transferencias de jugadores en el sistema.

------

Â¡Claro! A continuaciÃ³n te explico **archivo por archivo** dentro de la carpeta `data`, incluyendo su **funciÃ³n**, **quÃ© guarda** y **aplicaciÃ³n** dentro del sistema, como me pediste antes.

------

## ğŸ“ Carpeta: `data`

Contiene la **base de datos en formato JSON** para tu sistema de gestiÃ³n de torneos internacionales. Cada archivo representa una entidad del sistema.

------

### 1. `equipos.json`

#### ğŸ“Œ FunciÃ³n:

Almacena todos los equipos registrados en el sistema.

#### ğŸ“‚ Â¿QuÃ© guarda?:

Cada equipo con la siguiente informaciÃ³n:

- `id`: Identificador Ãºnico.
- `nombre`: Nombre del equipo.
- `fundacion`: Fecha de fundaciÃ³n.
- `pais`: PaÃ­s de origen.
- `liga_id`: Liga a la que pertenece el equipo.

#### ğŸ§© AplicaciÃ³n:

Se usa en:

- Registro y listado de equipos.
- AsociaciÃ³n de jugadores, dirigentes y transferencias.
- EstadÃ­sticas por equipo.

------

### 2. `jugadores.json`

#### ğŸ“Œ FunciÃ³n:

Guarda todos los jugadores registrados.

#### ğŸ“‚ Â¿QuÃ© guarda?:

Cada jugador con:

- `id`: Identificador Ãºnico.
- `nombre`: Nombre completo.
- `posicion`: PosiciÃ³n (portero, defensa, etc.).
- `numero`: NÃºmero de camiseta.
- `equipo_id`: ID del equipo al que pertenece.

#### ğŸ§© AplicaciÃ³n:

Se usa para:

- Registrar jugadores.
- Listarlos por equipo.
- Controlar transferencias y estadÃ­sticas.

------

### 3. `transferencias.json`

#### ğŸ“Œ FunciÃ³n:

Almacena el historial de transferencias (ventas o prÃ©stamos) de jugadores.

#### ğŸ“‚ Â¿QuÃ© guarda?:

Cada transferencia con:

- `id`: ID de la transferencia.
- `id_jugador`: ID del jugador transferido.
- `origen`: ID del equipo anterior.
- `destino`: ID del nuevo equipo.
- `tipo`: Tipo de transferencia ("venta" o "prÃ©stamo").
- `fecha`: Fecha de la transferencia.

#### ğŸ§© AplicaciÃ³n:

- Registrar movimientos de jugadores.
- Mostrar el historial completo.
- Permitir seguimiento y estadÃ­sticas de fichajes.

------

### 4. `dirigentes.json`

#### ğŸ“Œ FunciÃ³n:

Almacena informaciÃ³n de los dirigentes (presidentes, tÃ©cnicos, etc.) de los equipos.

#### ğŸ“‚ Â¿QuÃ© guarda?:

Cada dirigente con:

- `id`: Identificador Ãºnico.
- `nombre`: Nombre completo.
- `rol`: Cargo dentro del equipo (presidente, director tÃ©cnicoâ€¦).
- `equipo_id`: ID del equipo al que pertenece.

#### ğŸ§© AplicaciÃ³n:

(Actualmente no integrada en las funciones principales, pero Ãºtil para):

- AdministraciÃ³n de equipos.
- Reportes o vistas jerÃ¡rquicas del club.

------

### 5. `ligas.json`

#### ğŸ“Œ FunciÃ³n:

Guarda las ligas disponibles en el sistema (ej. LaLiga, Premier League).

#### ğŸ“‚ Â¿QuÃ© guarda?:

Cada liga con informaciÃ³n como:

- `id`: Identificador Ãºnico.
- `nombre`: Nombre de la liga.
- `pais`: PaÃ­s donde se disputa.

#### ğŸ§© AplicaciÃ³n:

- Asignar equipos a ligas.
- Organizar torneos o filtrar estadÃ­sticas por liga.

------

### 6. `partidos.json`

#### ğŸ“Œ FunciÃ³n:

Contiene los datos de partidos jugados o programados.

#### ğŸ“‚ Â¿QuÃ© guarda?:

Cada partido con datos como:

- `id`: Identificador del partido.
- `equipo_local` y `equipo_visitante`: IDs de los equipos.
- `fecha`: Fecha del partido.
- `resultado`: Resultado final (opcional).

#### ğŸ§© AplicaciÃ³n:

- Registrar y consultar resultados.
- Usar para generar estadÃ­sticas o posiciones.

------

### 7. `torneos.json`

#### ğŸ“Œ FunciÃ³n:

Almacena la informaciÃ³n de los torneos registrados.

#### ğŸ“‚ Â¿QuÃ© guarda?:

Cada torneo con informaciÃ³n como:

- `id`: ID del torneo.
- `nombre`: Nombre del torneo.
- `pais` o `region`: UbicaciÃ³n.
- `equipos_participantes`: Lista de IDs de los equipos inscritos.

#### ğŸ§© AplicaciÃ³n:

- Organizar competiciones.
- Agrupar partidos.
- Generar clasificaciones o fases eliminatorias.

------

Â¡Perfecto! Vamos ahora con la explicaciÃ³n del archivo `corefiles.py` que se encuentra en la carpeta `utils`, siguiendo el formato que me pediste: **funciÃ³n, quÃ© hace, quÃ© guarda y aplicaciÃ³n**.

------

## ğŸ“ Carpeta: `utils`

Esta carpeta contiene funciones de utilidad que ayudan a otros mÃ³dulos del sistema, como leer/guardar archivos (`corefiles.py`), validar datos (`validatedata.py`), manejar pantallas (`screencontrollers.py`) o configuraciones generales (`config.py`).

------

## ğŸ“„ Archivo: `corefiles.py`

Este archivo gestiona la lectura y escritura de archivos `.json` para que todo el sistema pueda trabajar con persistencia de datos.

------

### FunciÃ³n:

```
leer_json(ruta)
```

### Â¿QuÃ© hace?:

- Verifica si el archivo en la ruta especificada existe.
- Si no existe, devuelve un diccionario vacÃ­o (`{}`).
- Si existe, lo abre en modo lectura (`"r"`) y lo carga como un diccionario usando `json.load()`.

### Â¿QuÃ© guarda?:

No guarda nada, solo **lee y devuelve** los datos del archivo JSON.

### AplicaciÃ³n:

Se utiliza en todos los mÃ³dulos para cargar los datos actuales desde archivos JSON antes de modificarlos o consultarlos (por ejemplo: equipos, jugadores, transferencias, etc.).

------

### FunciÃ³n:

```
guardar_json(ruta, datos)
```

### Â¿QuÃ© hace?:

- Abre el archivo en modo escritura (`"w"`) y codificaciÃ³n UTF-8.
- Escribe (`dump`) los datos proporcionados en formato JSON.
- Usa `indent=4` para que el archivo sea legible y `ensure_ascii=False` para permitir caracteres especiales (como tildes o eÃ±es).

### Â¿QuÃ© guarda?:

Guarda un diccionario de datos (`datos`) en un archivo JSON en la ruta proporcionada (`ruta`).

### AplicaciÃ³n:

Se usa cada vez que se actualizan los datos del sistema (por ejemplo: al registrar un nuevo jugador o transferencia).

------

### ğŸ”„ Resumen visual:

```python
leer_json("data/equipos.json")     # Devuelve los datos de equipos como diccionario
guardar_json("data/jugadores.json", jugadores)  # Guarda el diccionario actualizado
```

------

Â¡Perfecto! Ahora vamos con la explicaciÃ³n de `validatedata.py`, que tambiÃ©n se encuentra en la carpeta `utils`. Como siempre, lo explico con:

- FunciÃ³n
- Â¿QuÃ© hace?
- Â¿QuÃ© guarda?
- AplicaciÃ³n

------

## ğŸ“„ Archivo: `validatedata.py`

Este archivo contiene funciones para validar los datos ingresados por el usuario desde la consola. Su propÃ³sito principal es asegurar que no se ingresen valores vacÃ­os o invÃ¡lidos.

------

### âœ… FunciÃ³n: `input_obligatorio(mensaje)`

### ğŸ“Œ Â¿QuÃ© hace?:

- Muestra un mensaje en consola (pasado como parÃ¡metro).
- Espera que el usuario escriba una respuesta.
- Si el usuario deja el campo vacÃ­o, vuelve a pedir el dato hasta que lo complete correctamente.
- Finalmente devuelve el valor ingresado (limpio).

### ğŸ’¾ Â¿QuÃ© guarda?:

No guarda nada directamente, pero **retorna** el valor ingresado por el usuario para que otras funciones lo usen (por ejemplo, al crear un jugador o un equipo).

### ğŸ§© AplicaciÃ³n:

Usado para validar que los campos requeridos **no estÃ©n vacÃ­os** cuando el usuario estÃ¡ registrando:

- Un equipo (`nombre`, `fundaciÃ³n`, etc.).
- Un jugador (`nombre`, `posiciÃ³n`, etc.).
- Una transferencia (`tipo`, `fecha`, etc.).

Esto evita que se ingresen datos incompletos que pueden romper la lÃ³gica del sistema.

------

### ğŸ§  Ejemplo de uso:

```python
nombre = input_obligatorio("Nombre del jugador: ")
# Si el usuario no escribe nada, seguirÃ¡ preguntando hasta que escriba algo.
```

------

### ğŸ’¡ Posible mejora futura:

Se podrÃ­an agregar otras funciones para:

- Validar fechas (formato correcto).
- Validar nÃºmeros enteros (ej. nÃºmero de camiseta).
- Validar que un ID exista antes de usarlo.

------

Â¡Perfecto! Gracias por mostrar el contenido de `screencontrollers.py`. Ahora te explico este archivo segÃºn el formato que usas: **FunciÃ³n, QuÃ© hace, QuÃ© guarda y AplicaciÃ³n**.

------

## ğŸ“„ Archivo: `screencontrollers.py`

Este archivo contiene funciones auxiliares para mejorar la experiencia del usuario en la terminal.

------

### âœ… FunciÃ³n: `limpiar_pantalla()`

#### ğŸ“Œ Â¿QuÃ© hace?

Limpia la consola o terminal para que el contenido anterior desaparezca, dejando la pantalla limpia para mostrar nueva informaciÃ³n.

- Usa `os.system('cls')` si estÃ¡s en **Windows**.
- Usa `os.system('clear')` si estÃ¡s en **Linux o MacOS**.

#### ğŸ’¾ Â¿QuÃ© guarda?

No guarda nada. Solo **limpia la pantalla de salida**.

#### ğŸ§© AplicaciÃ³n:

- Mejora la presentaciÃ³n del menÃº.
- Se puede usar antes de mostrar formularios o listados grandes.

------

### âœ… FunciÃ³n: `pausar_pantalla()`

#### ğŸ“Œ Â¿QuÃ© hace?

Hace una **pausa en la ejecuciÃ³n** del programa hasta que el usuario presione la tecla `Enter`.

#### ğŸ’¾ Â¿QuÃ© guarda?

Tampoco guarda nada. Solo **espera la interacciÃ³n del usuario**.

#### ğŸ§© AplicaciÃ³n:

- Permite que el usuario **lea un mensaje o resultado** antes de volver al menÃº.
- Muy Ãºtil despuÃ©s de mostrar un listado o registrar un dato.

------

### ğŸ§  Ejemplo de uso integrado:

```python
from utils.screencontrollers import limpiar_pantalla, pausar_pantalla

def menu():
    while True:
        limpiar_pantalla()
        print("=== MENÃš PRINCIPAL ===")
        print("1. Registrar jugador")
        print("0. Salir")

        opcion = input("Seleccione una opciÃ³n: ")
        if opcion == "1":
            registrar_jugador()
            pausar_pantalla()
        elif opcion == "0":
            break
```

------

## ğŸ“„ Archivo: `config.py`

### FunciÃ³n:

Contiene **constantes o configuraciones globales** del sistema que pueden reutilizarse en distintos mÃ³dulos.

### Â¿QuÃ© hace?:

Define rutas, colores, nombres de archivos, opciones de menÃº u otras variables reutilizables.

### Â¿QuÃ© guarda?:

No guarda datos dinÃ¡micos, pero define valores estÃ¡ticos que sirven como referencia en todo el sistema.

### AplicaciÃ³n:

- Centraliza configuraciones.
- Facilita el mantenimiento (ej. si cambias la carpeta `"data"` por otra, solo la cambias aquÃ­).
- Evita repetir cadenas largas o rutas en muchos archivos.

------

